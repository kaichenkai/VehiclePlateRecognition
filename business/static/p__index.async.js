(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"4q7P":function(e,t,a){"use strict";a("DjyN");var n=a("NUBc"),r=(a("g9YV"),a("wCAj")),i=a("q1tI"),l=a.n(i),o=function(e){var t=e.data,a=e.time_total,i=e.total,o=e.current,c=e.loading,s=e.pageSize,m=e.onShowSizeChange,u=e.onChange,d=e.columns,p=e.rowKey,g=e.onTableChange;return l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(r["a"],{rowKey:p,columns:d,dataSource:t,loading:c,pagination:!1,size:"small",scroll:{y:document.body.clientHeight-224},style:{height:document.body.clientHeight-186},onChange:g}),!1===a?null:l.a.createElement("p",null,"\u7b5b\u9009\u65f6\u95f4\u6bb5\u603b\u6761\u6570: ",a),l.a.createElement(n["a"],{style:{marginTop:14},showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e,t){return"\u5171"+e+"\u6761"},total:i,current:o,onChange:u,pageSizeOptions:["12","24","48"],pageSize:s,onShowSizeChange:m}))};t["a"]=o},Aeqt:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r});var n=["\u8f66\u724c\u66f4\u6b63","\u7591\u4f3c","\u6a21\u7cca","\u906e\u6321","\u672a\u5339\u914d\u5230\u8f66"],r=["\u672a\u5ba1\u6838","\u6b63\u7247","\u5e9f\u7247"]},EDuE:function(e,t,a){e.exports={timePickerForm:"timePickerForm___2wptw",timePickerFormButton:"timePickerFormButton___2v3Ls",timePicker:"timePicker___3Ts_V"}},RXBc:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,i,l=a("bx4M"),o=(a("14J3"),a("BMrR")),c=(a("jCWc"),a("kPKH")),s=(a("/zsF"),a("PArb")),m=(a("miYZ"),a("tsqr")),u=a("p0pE"),d=a.n(u),p=a("2Taf"),g=a.n(p),f=a("vZ4D"),h=a.n(f),_=a("l4Ni"),E=a.n(_),w=a("ujKo"),y=a.n(w),b=a("MhPg"),k=a.n(b),v=(a("+L6B"),a("2/Rp")),S=(a("5NDa"),a("5rEg")),x=(a("y8nQ"),a("Vl3Y")),D=(a("OaEy"),a("2fM7")),I=(a("iQDF"),a("+eQT")),Y=a("/MKj"),C=a("q1tI"),M=a.n(C),z=a("wd/R"),P=a.n(z),j=a("wY1l"),q=a.n(j),N=a("t3Un"),O=a("4q7P"),H=a("r0ct"),F=a("EDuE"),B=a.n(F),R=a("Aeqt"),T=a("es13"),A=I["a"].RangePicker,J=D["a"].Option,V={rules:[{type:"array"}],initialValue:[P()().startOf("day").subtract(1,"days"),P()().endOf("day").subtract(1,"days")]},K=function(e){var t=e.form,a=e.onSubmit;return M.a.createElement(x["a"],{className:B.a.timePickerForm,onSubmit:function(e){e.preventDefault(),t.validateFields(function(e,t){e||a(t)})}},M.a.createElement(x["a"].Item,{label:"\u5f55\u5165\u65f6\u95f4"},t.getFieldDecorator("time_range",V)(M.a.createElement(A,{className:B.a.timePicker,showTime:!0,format:"YYYY-MM-DD HH:mm:ss"}))),M.a.createElement(x["a"].Item,{label:"\u8bc6\u522b\u65f6\u95f4"},t.getFieldDecorator("recog_time_range",{rules:[{type:"array"}],initialValue:[]})(M.a.createElement(A,{className:B.a.timePicker,showTime:!0,format:"YYYY-MM-DD HH:mm:ss"}))),M.a.createElement(x["a"].Item,{label:"\u7c7b\u578b"},t.getFieldDecorator("types",{rules:[{type:"array"}]})(M.a.createElement(D["a"],{mode:"multiple",allowClear:!0},R["a"].map(function(e,t){return M.a.createElement(J,{key:t,value:t+1},e)})))),M.a.createElement(x["a"].Item,{label:"\u5ba1\u6838\u72b6\u6001"},t.getFieldDecorator("manual_check_status",{rules:[{type:"array"}]})(M.a.createElement(D["a"],{mode:"multiple",allowClear:!0},R["b"].map(function(e,t){return M.a.createElement(J,{key:t,value:t},e)})))),M.a.createElement(x["a"].Item,{label:"\u8fdd\u6cd5\u884c\u4e3a"},t.getFieldDecorator("action",{rules:[{type:"string"}]})(M.a.createElement(S["a"],null))),M.a.createElement(x["a"].Item,null,M.a.createElement(v["a"],{type:"primary",htmlType:"submit",className:B.a.timePickerFormButton},"\u786e\u5b9a")))},L=x["a"].create({name:"TimeSelectForm"})(K),Q=(n=Object(Y["c"])(function(e){var t=e.loading,a=e.data;return{data:a,loadingData:t.effects["data/fetch"]}}),n((i=function(e){function t(){var e;g()(this,t);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return e=E()(this,y()(t).call(this,...n)),e.state={showImageModal:!1,info:{},filters:{start_time:V.initialValue[0].format("YYYY-MM-DD HH:mm:ss"),end_time:V.initialValue[1].format("YYYY-MM-DD HH:mm:ss"),recog_start_time:0,recog_end_time:0,reason_code:[],manual_check_status:[],action:""}},e.columns=[{title:"\u7f16\u53f7",dataIndex:"id",width:"10%"},{title:"\u5f55\u5165\u65f6\u95f4",dataIndex:"data_entry_time",width:"15%"},{title:"\u8bc6\u522b\u65f6\u95f4",dataIndex:"sdk_recog_time",width:"15%",render:function(e,t,a){return P()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u8bc6\u522b\u53f7\u724c\u53f7\u7801",dataIndex:"sdk_car_plate_number",width:"15%"},{title:"\u539f\u59cb\u53f7\u724c\u53f7\u7801",dataIndex:"src_car_plate_number",width:"15%"},{title:"\u8bc6\u522b\u7ed3\u679c",dataIndex:"sdk_reason_code",render:function(e,t,a){return R["a"][e-1]},width:"10%"},{title:"\u5ba1\u6838\u72b6\u6001",dataIndex:"manual_check_status",render:function(e,t,a){return R["b"][e]},width:"10%"},{title:"\u64cd\u4f5c",render:function(t,a,n){return M.a.createElement(v["a"],{onClick:function(){return e.showImage(a,n)}},"\u67e5\u770b\u56fe\u7247")},width:"10%"}],e.reloadData=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=e.state.info.row.id;e.queryData(d()({pageSize:e.props.data.pageSize,page:e.props.data.page,simple:t},e.state.filters)).then(function(){if(e.props.data.items.length<=e.state.info.index)e.setState({showImageModal:!1});else{var t=e.state.info.index,n=e.props.data.items[t];e.setState({info:{index:t,row:n}});var r=e.props.data,i=r.total,l=r.pageSize,o=r.page,c=Math.ceil(i/l)===o&&t===i%l-1;if(a===n.id&&!c)return void e.nextImage();a===n.id&&c&&e.setState({showImageModal:!1}),e.setState({info:{index:t,row:n}})}})},e.showImage=function(t,a){e.setState({showImageModal:!0,info:{index:a,row:t}})},e.onChangePage=function(t,a){e.queryData({page:t,pageSize:a,simple:!0})},e.onChangePageSize=function(t,a){e.queryData({page:1,pageSize:a,simple:!0})},e.nextImage=function(){var t=e.state.info.index,a=e.props.data;a.items.length!==t+1?e.setState({info:{index:t+1,row:a.items[t+1]}}):e.queryData({page:a.page+1,pageSize:a.pageSize}).then(function(){var t=e.props.data;e.setState({info:{index:0,row:t.items[0]}})})},e.prevImage=function(){var t=e.state.info.index,a=e.props.data;0!==t?e.setState({info:{index:t-1,row:a.items[t-1]}}):e.queryData({page:a.page-1,pageSize:a.pageSize}).then(function(){var t=e.props.data;e.setState({info:{index:t.items.length-1,row:t.items[t.items.length-1]}})})},e.timeSelectSubmit=function(t){var a={start_time:t.time_range&&2===t.time_range.length?P()(t.time_range[0]).format("YYYY-MM-DD HH:mm:ss"):void 0,end_time:t.time_range&&2===t.time_range.length?P()(t.time_range[1]).format("YYYY-MM-DD HH:mm:ss"):void 0,recog_start_time:t.recog_time_range&&2===t.recog_time_range.length?Math.round(t.recog_time_range[0].valueOf()):0,recog_end_time:t.recog_time_range&&2===t.recog_time_range.length?Math.round(t.recog_time_range[1].valueOf()):0,reason_code:t.types?t.types.map(function(e){return parseInt(e)}):[],manual_check_status:t.manual_check_status?t.manual_check_status:[],action:t.action||""},n=e.props.data;e.setState({filters:a},function(){e.queryData({page:1,pageSize:n.pageSize})})},e.pauseJob=function(){Object(N["a"])("/pause/job",{method:"get"}).then(function(e){Object(N["b"])(e)&&m["a"].success("\u64cd\u4f5c\u6210\u529f")})},e.restartJob=function(){Object(N["a"])("/restart/job",{method:"get"}).then(function(e){Object(N["b"])(e)&&m["a"].success("\u64cd\u4f5c\u6210\u529f")})},e}return k()(t,e),h()(t,[{key:"componentDidMount",value:function(){this.queryData({page:1,pageSize:24})}},{key:"queryData",value:function(e){return this.props.dispatch({type:"data/fetch",payload:{data:d()({pageSize:e.pageSize,current:(e.page-1)*e.pageSize,simple:!!e.simple},this.state.filters)}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.loadingData,r=this.state,i=r.showImageModal,m=r.info,u=r.filters;return M.a.createElement(C["Fragment"],null,M.a.createElement(l["a"],{title:"\u5bf9\u6bd4\u7ed3\u679c\u67e5\u8be2",extra:M.a.createElement("span",null,M.a.createElement(H["a"],{url:"/api/download/result",filter:u}),M.a.createElement(s["a"],{type:"vertical"}),M.a.createElement(q.a,{to:"/count"},"\u901a\u62a5\u7edf\u8ba1"))},M.a.createElement(o["a"],null,M.a.createElement(c["a"],{span:6},M.a.createElement(o["a"],{type:"flex",justify:"space-around"},M.a.createElement(c["a"],null,M.a.createElement(L,{onSubmit:this.timeSelectSubmit}))),M.a.createElement(o["a"],{type:"flex",justify:"space-around"},M.a.createElement(c["a"],null,M.a.createElement(v["a"],{onClick:this.pauseJob},"\u6682\u505c\u5206\u6790")),M.a.createElement(c["a"],null,M.a.createElement(v["a"],{onClick:this.restartJob},"\u6062\u590d\u5206\u6790")))),M.a.createElement(c["a"],{span:18,className:B.a.tableContainer},M.a.createElement(O["a"],{rowKey:function(e){return e.id},data:a.items,time_total:a.time_total,current:a.page,pageSize:a.pageSize,total:a.total,onShowSizeChange:this.onChangePageSize,onChange:this.onChangePage,loading:n,columns:this.columns})))),M.a.createElement(T["a"],{showImageModal:i,reloadData:this.reloadData,nextImage:this.nextImage,prevImage:this.prevImage,data:a,info:m,onCancel:function(){return e.setState({showImageModal:!1})}}))}}]),t}(C["Component"]),r=i))||r);t["default"]=Q},YRlp:function(e,t,a){e.exports={imageBox:"imageBox___svO8q",left:"left___3SecU",right:"right___2j5VR",img:"img___3Z0B6"}},es13:function(e,t,a){"use strict";a("2qtc");var n=a("kLXV"),r=a("q1tI"),i=a.n(r),l=(a("14J3"),a("BMrR")),o=(a("miYZ"),a("tsqr")),c=(a("jCWc"),a("kPKH")),s=(a("+L6B"),a("2/Rp")),m=a("Py4S"),u=a.n(m),d=a("YRlp"),p=a.n(d),g=a("Aeqt"),f=a("t3Un"),h=function(e,t){for(var a=[],n=0;n<Math.max(e.length,t.length);n++)e[n]!==t[n]&&a.push(n);return a},_=function(e){var t=e.markChars,a=e.text;return i.a.createElement(r["Fragment"],null,a.split("").map(function(e,a){return t.includes(a)?i.a.createElement("span",{key:a,style:{color:"red"}},e):e}))},E=function(e){var t=e.info,a=e.nextImage,n=e.prevImage,r=e.hasNotNext,m=e.hasNotPrev,d=e.reloadData,E=h(t.row.src_car_plate_number,t.row.sdk_car_plate_number);return i.a.createElement(l["a"],null,i.a.createElement(c["a"],{span:18,className:p.a.imageBox},i.a.createElement(u.a,{className:p.a.img,src:"/api/show/image/".concat(t.row.id),alt:""}),i.a.createElement(s["a"],{onClick:n,className:p.a.left,disabled:m},"\u4e0a\u4e00\u6761"),i.a.createElement(s["a"],{onClick:a,className:p.a.right,disabled:r},"\u4e0b\u4e00\u6761")),i.a.createElement(c["a"],{span:5,offset:1,className:p.a.infoBox},i.a.createElement("p",null,i.a.createElement("b",null,"\u539f\u59cb\u4fe1\u606f")),i.a.createElement("p",null,"\u53f7\u724c\u53f7\u7801\uff1a",i.a.createElement(_,{markChars:E,text:t.row.src_car_plate_number})),i.a.createElement("p",null,"\u5f55\u5165\u65f6\u95f4\uff1a",t.row.data_entry_time),i.a.createElement("p",null,"\u8fdd\u6cd5\u884c\u4e3a\uff1a",t.row.src_illegal_action),i.a.createElement("p",null,i.a.createElement("b",null,"\u8bc6\u522b\u4fe1\u606f")),i.a.createElement("p",null,"\u53f7\u724c\u53f7\u7801\uff1a",i.a.createElement(_,{markChars:E,text:t.row.sdk_car_plate_number})),i.a.createElement("p",null,"\u8bc6\u522b\u7ed3\u679c\uff1a",g["a"][t.row.sdk_reason_code-1]),i.a.createElement("p",null,"\u63d0\u53d6\u53f7\u724c\uff1a",i.a.createElement("br",null),i.a.createElement("img",{style:{width:200},src:"/api/show/image/".concat(t.row.id,"?box=").concat(t.row.sdk_plate_rect.slice(1,t.row.sdk_plate_rect.indexOf("]"))),alt:""})),i.a.createElement("div",null,"\u5b57\u6bb5\u5f97\u5206:",i.a.createElement("table",{border:"1"},i.a.createElement("tbody",null,i.a.createElement("tr",null,t.row.sdk_car_plate_number.split("").map(function(e,t){return i.a.createElement("td",{key:t,style:E.includes(t)?{border:"1px solid red",color:"red"}:{}},e)})),i.a.createElement("tr",null,t.row.plate_scores.map(function(e,t){return i.a.createElement("td",{key:t},e)})))),i.a.createElement("p",null)),i.a.createElement("p",null,"\u5ba1\u6838\u7ed3\u679c\uff1a",g["b"][t.row.manual_check_status]),i.a.createElement(s["a"],{onClick:function(){Object(f["a"])("/api/update/manual/status",{method:"patch",data:{ids:[t.row.id],manual_check_status:1}}).then(function(e){Object(f["b"])(e)&&(o["a"].success("\u64cd\u4f5c\u6210\u529f"),d(!0))})},type:"primary",block:!0,style:{marginBottom:10}},"\u6b63\u7247"),i.a.createElement(s["a"],{onClick:function(){Object(f["a"])("/api/update/manual/status",{method:"patch",data:{ids:[t.row.id],manual_check_status:2}}).then(function(e){Object(f["b"])(e)&&(o["a"].success("\u64cd\u4f5c\u6210\u529f"),d(!0))})},block:!0},"\u5e9f\u7247")))},w=E,y=function(e){var t=e.showImageModal,a=e.reloadData,r=e.nextImage,l=e.prevImage,o=e.data,c=e.info,s=e.onCancel;return i.a.createElement(n["a"],{title:"\u67e5\u770b\u8be6\u60c5",width:1048,visible:t,footer:null,onCancel:s},i.a.createElement(w,{reloadData:a,info:c,nextImage:r,prevImage:l,hasNotNext:Math.ceil(o.total/o.pageSize)===o.page&&c.index===o.total%o.pageSize-1,hasNotPrev:1===o.page&&0===c.index}))};t["a"]=y},r0ct:function(e,t,a){"use strict";a("+L6B");var n=a("2/Rp"),r=(a("Pwec"),a("CtXQ")),i=a("q1tI"),l=a.n(i),o=function(e){var t=e.url,a=e.filter,i=e.name;return l.a.createElement(n["a"],{target:"_blank",href:"".concat(t,"?").concat(Object.keys(a).map(function(e){return void 0===a[e]?"":Array.isArray(a[e])?"".concat(e,"=[").concat(a[e].join(","),"]"):"".concat(e,"=").concat(a[e])}).filter(function(e){return""!==e}).join("&"))},l.a.createElement(r["a"],{type:"download"}),i||"\u5bfc\u51fa")};t["a"]=o}}]);